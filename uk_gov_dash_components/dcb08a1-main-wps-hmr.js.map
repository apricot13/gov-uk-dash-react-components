{"version":3,"sources":["webpack:///./src/lib/fragments/AutoComplete.react.js"],"names":["AutoComplete","props","defaultProps","id","autoselect","cssNamespace","value","displayMenu","minLength","name","placeholder","onConfirm","confirmOnBlur","showNoOptionsFound","showAllValues","required","tNoResults","tAssistiveHint","source","templates","dropdownArrowFactory","dropdownArrow","tStatusQueryTooShort","tStatusNoResults","tStatusSelectedOption","tStatusResults","setProps","ariaLabelledBy","selectElement","alwaysDisplayArrow","style","Error","createSimpleEngine","values","query","syncResults","length","filter","r","label","toLowerCase","indexOf","dataSource","Array","isArray","useState","isFocus","setFocus","isHover","setHover","isMenuOpen","setMenuOpen","options","setOptions","setQuery","validChoiceMade","setValidChoiceMade","selected","setSelected","ariaHint","setAriaHint","elementReferences","getRealOptions","map","option","templateInputValue","inputValueTemplate","inputValue","templateSuggestion","suggestionTemplate","suggestion","isQueryAnOption","entry","handleComponentBlur","newState","escape","focusOnBlur","newQuery","selectedOption","menuOpen","handleListMouseLeave","handleOptionBlur","event","index","focusingOutsideComponent","relatedTarget","focusingInput","focusingAnotherOption","blurComponent","keepMenuOpen","isIOSDevice","handleInputBlur","focusingAnOption","matches","handleInputFocus","shouldReopenMenu","wrapAround","selectOptions","queryLength","trim","handleOptionFocus","select","useIndex","handleOptionMouseEnter","hasAutoselect","handleOptionClick","preventDefault","stopPropagation","handleOptionMouseDown","handleUpArrow","realOpt","isNotAtTop","allowMoveUp","handleDownArrow","isNotAtBottom","handleSpace","focusIsOnOption","handleEnter","hasSelectedOption","openMenu","handlePrintableKey","inputElement","eventIsOnInput","target","focus","handleKeyDown","keyCodes","keyCode","isPrintableKeyCode","handleInputChange","queryChanged","queryLongEnough","searchForOptions","optionsAvailable","handleInputClick","currentSelectionIndex","clearSelection","Event","bubbles","cancelable","dispatchEvent","useEffect","useInterval","inputReference","queryHasChanged","accessibleAutocomplete","autoselectRend","inputFocused","noOptionsAvailable","queryNotEmpty","showNoOptionsFoundRender","wrapperClassName","inputClassName","componentIsFocused","inputModifierFocused","inputModifierType","dropdownArrowClassName","optionFocused","menuClassName","menuModifierDisplayMenu","menuIsVisible","menuModifierVisibility","optionClassName","hintClassName","selectedOptionText","optionBeginsWithQuery","hintValue","substr","assistiveHintID","ariaDescribedProp","className","__html","showFocused","optionModifierFocused","optionModifierOdd","iosPosinsetHtml","optionEl","display","enhanceSelectElement","configurationOptions","availableOptions","call","preserveNullOptions","textContent","innerText","requestedOption","undefined","selectedIndex","element","document","createElement","parentNode","insertBefore","render","propTypes"],"mappings":"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","file":"dcb08a1-main-wps-hmr.js","sourcesContent":["/* eslint-disable no-undefined */\nimport React, { useState, useEffect, render } from 'react';\nimport { useInterval } from 'usehooks-ts'\nimport { defaultProps, propTypes } from '../components/AutoComplete.react';\nimport { isIOSDevice } from '../helper/isIOS';\nimport { isPrintableKeyCode, keyCodes } from '../helper/keys';\nimport Status from '../components/status'\nimport './autocomplete.css';\n\n/**\n * Autocomplete to GOV GDS\n *\n * @param {*} [{\n * \tid,\n * \tautoselect,\n * \tcssNamespace,\n * \tvalue,\n * \tdisplayMenu,\n * \tminLength,\n * \tname,\n * \tplaceholder,\n * \tonConfirm,\n * \tconfirmOnBlur,\n * \tshowNoOptionsFound,\n * \tshowAllValues,\n * \trequired,\n * \ttNoResults,\n * \ttAssistiveHint,\n * \tsource,\n * \ttemplates,\n * \tdropdownArrow: dropdownArrowFactory,\n * \ttStatusQueryTooShort,\n * \ttStatusNoResults,\n * \ttStatusSelectedOption,\n * \ttStatusResults,\n * }=defaultProps]\n * @return {*}\n */\nconst AutoComplete = (props) => {\n\tconst {\n\t\tid,\n\t\tautoselect,\n\t\tcssNamespace,\n\t\tvalue,\n\t\tdisplayMenu,\n\t\tminLength,\n\t\tname,\n\t\tplaceholder,\n\t\tonConfirm,\n\t\tconfirmOnBlur,\n\t\tshowNoOptionsFound,\n\t\tshowAllValues,\n\t\trequired,\n\t\ttNoResults,\n\t\ttAssistiveHint,\n\t\tsource,\n\t\ttemplates,\n\t\tdropdownArrow: dropdownArrowFactory,\n\t\ttStatusQueryTooShort,\n\t\ttStatusNoResults,\n\t\ttStatusSelectedOption,\n\t\ttStatusResults,\n\t\tsetProps,\n\t\tariaLabelledBy,\n\t\tselectElement,\n\t\talwaysDisplayArrow,\n\t\tstyle,\n\t} = { ...defaultProps, ...props }\n\tif (!id) { throw new Error('id is not defined') }\n\tif (!source) { throw new Error('source is not defined') }\n\n\tconst createSimpleEngine = (values) => (query, syncResults) => {\n\n\t\tif (values.length && typeof values[0] === 'object') {\n\t\t\tsyncResults(values.filter(r => (r ? r.label || r.name || r.value || r : r).toLowerCase().indexOf(query.toLowerCase()) !== -1))\n\t\t} else {\n\t\t\tsyncResults(values.filter(r => r.toLowerCase().indexOf(query.toLowerCase()) !== -1))\n\t\t}\n\t}\n\tconst dataSource = Array.isArray(source) ? createSimpleEngine(source) : source;\n\tconst [ isFocus, setFocus ] = useState(null);\n\tconst [ isHover, setHover ] = useState(null);\n\tconst [isMenuOpen, setMenuOpen] = useState(false);\n\tconst [options, setOptions] = useState(value ? [value] : []);\n\tconst [query, setQuery] = useState(value ?? '');\n\tconst [ validChoiceMade, setValidChoiceMade ] = useState(false);\n\tconst [ selected, setSelected ] = useState(null);\n\tconst [ ariaHint, setAriaHint ] = useState(true);\n\n\tconst elementReferences = {};\n\n\tconst getRealOptions = (options) => {\n\t\tdebugger;\n\t\treturn typeof options[0] === 'object' ? options.map(option => option?.value || option) : options;\n\t}\n\n\n\t// This template is used when converting from a state.options object into a state.query.\n\tconst templateInputValue = (value) => {\n\t\tconst inputValueTemplate = templates?.inputValue\n\t\treturn inputValueTemplate ? inputValueTemplate(value) : (value?.value ?? value)\n\t}\n\n\t// This template is used when displaying results / suggestions.\n\tconst templateSuggestion = (value) => {\n\t\tconst suggestionTemplate = templates?.suggestion\n\t\treturn suggestionTemplate ? suggestionTemplate(value) : (value ? value.label || value.name || value.value || value : value)\n\t}\n\n\tconst isQueryAnOption = (query, options) => {\n\t\treturn options.map(entry => templateInputValue(entry).toLowerCase()).indexOf(query.toLowerCase()) !== -1\n\t}\n\n\tconst handleComponentBlur = (newState, escape) => {\n\t\tconst focusOnBlur = escape && (selectElement || showAllValues) ? -1 : null\n\t\tlet newQuery\n\t\tif (confirmOnBlur) {\n\t\t\tnewQuery = newState.query || query\n\t\t\tconst selectedOption = options[selected];\n\t\t\tonConfirm(selectedOption.value ?? selectedOption)\n\t\t} else {\n\t\t\tnewQuery = query\n\t\t}\n\t\tsetFocus(focusOnBlur);\n\t\tsetMenuOpen(newState.menuOpen || false);\n\t\tsetQuery(newQuery);\n\t\tsetSelected(null);\n\t\tsetValidChoiceMade(isQueryAnOption(newQuery, options))\n\t}\n\n\tconst handleListMouseLeave = () => {\n\t\tsetHover(null);\n\t}\n\n\tconst handleOptionBlur = (event, index) => {\n\t\tconst focusingOutsideComponent = event.relatedTarget === null\n\t\tconst focusingInput = event.relatedTarget === elementReferences[-1]\n\t\tconst focusingAnotherOption = isFocus !== index && isFocus !== -1\n\t\tconst blurComponent = (!focusingAnotherOption && focusingOutsideComponent) || !(focusingAnotherOption || focusingInput)\n\t\tif (blurComponent) {\n\t\t\tconst keepMenuOpen = isMenuOpen && isIOSDevice()\n\t\t\thandleComponentBlur({\n\t\t\t\tmenuOpen: keepMenuOpen,\n\t\t\t\tquery: templateInputValue(options[selected])\n\t\t\t})\n\t\t}\n\t}\n\n\tconst handleInputBlur = (event) => {\n\t\tconst focusingAnOption = isFocus !== -1\n\t\tif (!focusingAnOption || !event?.relatedTarget?.matches('li.autocomplete__option')) {\n\t\t\tconst keepMenuOpen = isMenuOpen && isIOSDevice()\n\t\t\tconst newQuery = isIOSDevice() ? query : templateInputValue(options[selected])\n\t\t\thandleComponentBlur({\n\t\t\t\tmenuOpen: keepMenuOpen,\n\t\t\t\tquery: newQuery\n\t\t\t})\n\t\t}\n\t}\n\n\tconst handleInputFocus = () => {\n\t\tif (selectElement || showAllValues) {\n\t\t\treturn\n\t\t}\n\t\tconst shouldReopenMenu = !validChoiceMade && query?.length >= minLength && options?.length > 0\n\t\tsetFocus(-1);\n\t\tif (shouldReopenMenu) {\n\t\t\tsetMenuOpen(shouldReopenMenu || isMenuOpen);\n\t\t\tsetSelected(-1)\n\t\t}\n\t}\n\n\tconst wrapAround = (index) => {\n\t\tconst selectOptions = selectElement.options\n\t\tconst queryLength = query ? query.trim().length : 0\n\t\tconst length = queryLength > minLength ? options.length : selectOptions.length\n\n\t\tif (index < 0) {\n\t\t\treturn length - 1\n\t\t} else if (index >= length) {\n\t\t\treturn 0\n\t\t}\n\n\t\treturn index\n\t}\n\n\tconst handleOptionFocus = (index, select) => {\n\t\t// if we're replacing a select element, then we need\n\t\t// to allow the user to wrap around the options when pressing\n\t\t// up/down arrows\n\t\tconst useIndex = selectElement ? wrapAround(index) : index;\n\n\t\tsetFocus(useIndex);\n\t\tsetHover(null);\n\t\tsetSelected(useIndex);\n\n\t\tif (select) {\n\t\t\tconst selectedOption = options[useIndex]\n\t\t\tconst newQuery = templateInputValue(selectedOption)\n\t\t\tsetQuery(newQuery);\n\t\t\tsetValidChoiceMade(true);\n\n\t\t\tif (selectElement) {\n\t\t\t\tonConfirm(selectedOption?.value ?? selectedOption)\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleOptionMouseEnter = (index) => {\n\t\t// iOS Safari prevents click event if mouseenter adds hover background colour\n\t\t// See: https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW4\n\t\tif (!isIOSDevice()) {\n\t\t\tsetHover(index)\n\t\t}\n\t}\n\n\tconst hasAutoselect = () => {\n\t\treturn isIOSDevice() ? false : autoselect\n\t}\n\n\n\n\tconst handleOptionClick = (event, index, menuOpen = false) => {\n\t\tconst selectedOption = options[index]\n\t\tconst newQuery = templateInputValue(selectedOption)\n\t\tonConfirm(selectedOption?.value ?? selectedOption)\n\n\t\t// Do not remove this, otherwise the input can receive the event and\n\t\t// keep the menu open unintentionally\n\t\tevent.preventDefault()\n\t\tevent.stopPropagation()\n\n\t\tsetFocus(-1);\n\t\tsetHover(null);\n\t\tsetMenuOpen(menuOpen);\n\t\tsetQuery(newQuery)\n\t\tsetSelected(-1);\n\t\tsetValidChoiceMade(true);\n\t}\n\n\tconst handleOptionMouseDown = (event) => {\n\t\t// Safari triggers focusOut before click, but if you\n\t\t// preventDefault on mouseDown, you can stop that from happening.\n\t\t// If this is removed, clicking on an option in Safari will trigger\n\t\t// `handleOptionBlur`, which closes the menu, and the click will\n\t\t// trigger on the element underneath instead.\n\t\t// See: http://stackoverflow.com/questions/7621711/how-to-prevent-blur-running-when-clicking-a-link-in-jquery\n\t\tevent.preventDefault()\n\t}\n\n\tconst handleUpArrow = (event) => {\n\t\tevent.preventDefault()\n\n\t\t// If we're replacing a select element, we need to provide the interaction\n\t\t// where the dropdown is closed, and user presses up.\n\t\t// In this case they focus on the option before the selected one (or the last),\n\t\t// and also make menu open\n\t\tif (selectElement && isMenuOpen === false) {\n\t\t\tdataSource('', (options) => {\n\t\t\t\tsetMenuOpen(true);\n\t\t\t\tsetOptions(options);\n\n\t\t\t\tconst realOpt = getRealOptions(options);\n\n\t\t\t\tlet index = query && realOpt.indexOf(query) > 0 ? realOpt.indexOf(query) - 1 : options.length - 1\n\n\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\tindex = options.length - 1\n\t\t\t\t\t}\n\n\t\t\t\t\thandleOptionFocus(index, true)\n\t\t\t})\n\t\t} else {\n\t\t\tconst isNotAtTop = selected !== -1\n\t\t\tconst allowMoveUp = isNotAtTop && isMenuOpen\n\n\t\t\tif (allowMoveUp || selectElement) {\n\t\t\t\thandleOptionFocus(selected - 1, autoselect)\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleDownArrow = (event) => {\n\t\tevent.preventDefault()\n\t\t// If we're replacing a select element, we need to provide the interaction\n\t\t// where the dropdown is closed, and user presses down.\n\t\t// In this case they focus on the option after the selected one (or the first),\n\t\t// and also make menu open\n\t\tif (selectElement && !isMenuOpen) {\n\t\t\tdataSource('', (options) => {\n\t\t\t\tsetMenuOpen(true);\n\t\t\t\tsetOptions(options);\n\t\t\t\tconst realOpt = getRealOptions(options);\n\t\t\t\tlet index = query && realOpt.indexOf(query) > -1 ? realOpt.indexOf(query) + 1 : 0\n\n\t\t\t\tif (index >= options.length) {\n\t\t\t\t\tindex = 0\n\t\t\t\t}\n\n\t\t\t\thandleOptionFocus(index, true)\n\t\t\t})\n\t\t} else if (showAllValues && !isMenuOpen) {\n\t\t\tevent.preventDefault()\n\t\t\tdataSource('', (options) => {\n\t\t\t\tsetMenuOpen(true);\n\t\t\t\tsetOptions(options);\n\t\t\t\tsetSelected(0);\n\t\t\t\tsetFocus(0);\n\t\t\t\tsetHover(null);\n\t\t\t})\n\t\t} else if (isMenuOpen) {\n\n\t\t\tconst isNotAtBottom = selected !== options.length - 1\n\t\t\tif (isNotAtBottom || selectElement) {\n\t\t\t\thandleOptionFocus(selected + 1, autoselect)\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleSpace = (event) => {\n\t\tdebugger;\n\t\tif ((selectElement && !isMenuOpen) || (showAllValues && !isMenuOpen && query === '')) {\n\t\t\tif (query.trim().length === 0) {\n\t\t\t\tevent.preventDefault()\n\t\t\t}\n\t\t\tdataSource('', (options) => {\n\t\t\t\tdebugger;\n\t\t\t\tconst realOpt = getRealOptions(options);\n\t\t\t\tconst index = query && realOpt.indexOf(query) > -1 ? realOpt.indexOf(query) : 0\n\t\t\t\tsetMenuOpen(true);\n\t\t\t\tsetOptions(options);\n\t\t\t\tsetFocus(index);\n\t\t\t\tsetSelected(index);\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\t\tconst focusIsOnOption = isFocus !== -1\n\t\tif (focusIsOnOption) {\n\t\t\tevent.preventDefault()\n\t\t\thandleOptionClick(event, isFocus)\n\t\t}\n\t}\n\n\tconst handleEnter = (event) => {\n\t\tif (isMenuOpen) {\n\t\t\tevent.preventDefault()\n\t\t\tconst hasSelectedOption = selected >= 0\n\t\t\tif (hasSelectedOption) {\n\t\t\t\thandleOptionClick(event, selected)\n\t\t\t}\n\t\t} else if (selectElement) {\n\t\t\tdataSource('', (options) => {\n\t\t\t\tsetOptions(options)\n\t\t\t\tconst realOpt = getRealOptions(options);\n\t\t\t\tlet index = query && realOpt.indexOf(query) > -1 ? realOpt.indexOf(query) : 0\n\t\t\t\tlet openMenu = true\n\n\t\t\t\tif (!selectElement) {\n\t\t\t\t\tindex = -1\n\t\t\t\t\topenMenu = false\n\t\t\t\t}\n\t\t\t\tsetMenuOpen(openMenu);\n\t\t\t\tsetFocus(index);\n\t\t\t\tsetSelected(index);\n\t\t\t})\n\t\t}\n\t}\n\n\tconst handlePrintableKey = (event) => {\n\t\tconst inputElement = elementReferences[-1]\n\t\tconst eventIsOnInput = event.target === inputElement\n\t\tif (!eventIsOnInput) {\n\t\t\tinputElement.focus()\n\t\t}\n\t}\n\n\n\tconst handleKeyDown = (event) => {\n\t\tswitch (keyCodes[event.keyCode]) {\n\t\t\tcase 'up':\n\t\t\t\thandleUpArrow(event)\n\t\t\t\tbreak\n\t\t\tcase 'down':\n\t\t\t\thandleDownArrow(event)\n\t\t\t\tbreak\n\t\t\tcase 'space':\n\t\t\t\thandleSpace(event)\n\t\t\t\tbreak\n\t\t\tcase 'enter':\n\t\t\t\thandleEnter(event)\n\t\t\t\tbreak\n\t\t\tcase 'escape':\n\t\t\t\thandleComponentBlur({\n\t\t\t\t\tquery: query\n\t\t\t\t}, true)\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tif (isPrintableKeyCode(event.keyCode)) {\n\t\t\t\t\thandlePrintableKey(event)\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t}\n\t}\n\tconst handleInputChange = (event) => {\n\t\t// Besides the normal input that can be received by the user,\n\t\t// we also need to take care of special actions even in the input\n\t\tswitch (keyCodes[event.keyCode]) {\n\t\t\tcase 'up':\n\t\t\t\thandleUpArrow(event)\n\t\t\t\tbreak\n\t\t\tcase 'down':\n\t\t\t\thandleDownArrow(event)\n\t\t\t\tbreak\n\t\t\tcase 'space':\n\t\t\t\thandleSpace(event)\n\t\t\t\tbreak\n\t\t\tcase 'enter':\n\t\t\t\thandleEnter(event)\n\t\t\t\tbreak\n\t\t\tcase 'escape':\n\t\t\t\thandleComponentBlur({\n\t\t\t\t\tquery: event.target.value\n\t\t\t\t}, true)\n\n\t\t\t\tbreak\n\t\t\tdefault: {\n\t\t\t\tconst autoselect = hasAutoselect()\n\t\t\t\tconst newQuery = event.target.value\n\t\t\t\tconst queryChanged = query !== newQuery\n\t\t\t\tconst queryLongEnough = newQuery.length >= minLength\n\n\n\t\t\t\tsetQuery(newQuery)\n\t\t\t\tsetAriaHint(newQuery.length === 0)\n\n\t\t\t\tconst searchForOptions = showAllValues || (newQuery.length && queryChanged && queryLongEnough)\n\t\t\t\tif (searchForOptions) {\n\t\t\t\t\tdataSource(newQuery, (options) => {\n\t\t\t\t\t\tconst optionsAvailable = options.length > 0\n\t\t\t\t\t\tsetMenuOpen(optionsAvailable);\n\t\t\t\t\t\tsetOptions(options);\n\t\t\t\t\t\tsetSelected((autoselect && optionsAvailable) ? 0 : -1);\n\t\t\t\t\t\tsetValidChoiceMade(false);\n\t\t\t\t\t\tsetFocus(selectElement ? (optionsAvailable ? 0 : -1) : focus)\n\t\t\t\t\t})\n\t\t\t\t} else if (!newQuery.length || !queryLongEnough) {\n\t\t\t\t\tsetMenuOpen(false);\n\t\t\t\t\tsetOptions([]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\tconst handleInputClick = (event) => {\n\t\tif ((selectElement || showAllValues) && isMenuOpen === false) {\n\t\t\tconst newQuery = event.target.value\n\t\t\tdataSource('', (options) => {\n\t\t\t\tconst currentSelectionIndex = options.indexOf(newQuery)\n\t\t\t\tsetMenuOpen(true);\n\t\t\t\tsetOptions(options);\n\t\t\t\tsetFocus(currentSelectionIndex);\n\t\t\t\tsetSelected(currentSelectionIndex);\n\t\t\t\tsetHover(null);\n\t\t\t})\n\t\t} else if (selectElement || showAllValues) {\n\t\t\thandleComponentBlur({\n\t\t\t\tmenuOpen: false\n\t\t\t}, true)\n\t\t} else {\n\t\t\thandleInputChange(event)\n\t\t}\n\t}\n\n\tconst clearSelection = () => {\n\t\tsetFocus(null);\n\t\tsetHover(null);\n\t\tsetMenuOpen(false);\n\t\tsetOptions(value ? [value] : []);\n\t\tsetQuery('');\n\t\tsetValidChoiceMade(false);\n\t\tselectElement.value = null\n\t\tconst event = new Event('selectElement', { bubbles: true, cancelable: false });\n\t\tselectElement.dispatchEvent(event);\n\n\t}\n\n\tuseEffect(() => {\n\t\tif (typeof setProps === 'function' ) {\n\t\t\tsetProps({ value: query})\n\t\t}\n\t\tsetAriaHint(!query?.length)\n\t}, [query])\n\n\tuseInterval(() => {\n\t\tconst inputReference = elementReferences[-1]\n\t\tconst queryHasChanged = inputReference?.value !== query\n\t\tif (queryHasChanged) {\n\t\t\thandleInputChange({ target: { value: inputReference.value } })\n\t\t}\n\n\t\tif (selectElement) {\n\t\t\t// Expose public API\n\t\t\tselectElement.accessibleAutocomplete = {\n\t\t\t\tclearSelection: clearSelection\n\t\t\t}\n\t\t}\n\t}, 100)\n\n\tconst autoselectRend = hasAutoselect()\n\n\tconst inputFocused = isFocus === -1\n\tconst noOptionsAvailable = options?.length === 0\n\tconst queryNotEmpty = query?.length !== 0\n\tconst queryLongEnough = query?.length >= minLength\n\tconst showNoOptionsFoundRender = showNoOptionsFound &&\n\t\tinputFocused && noOptionsAvailable && queryNotEmpty && queryLongEnough\n\n\tconst wrapperClassName = `${cssNamespace}__wrapper`\n\n\tconst inputClassName = `${cssNamespace}__input`\n\tconst componentIsFocused = isFocus !== null\n\tconst inputModifierFocused = componentIsFocused ? ` ${inputClassName}--focused` : ''\n\tconst inputModifierType = showAllValues ? ` ${inputClassName}--show-all-values` : ` ${inputClassName}--default`\n\tconst dropdownArrowClassName = `${cssNamespace}__dropdown-arrow-down`\n\tconst optionFocused = isFocus !== -1 && isFocus !== null\n\n\tconst menuClassName = `${cssNamespace}__menu`\n\tconst menuModifierDisplayMenu = `${menuClassName}--${displayMenu}`\n\tconst menuIsVisible = isMenuOpen || showNoOptionsFoundRender\n\tconst menuModifierVisibility = `${menuClassName}--${(menuIsVisible) ? 'visible' : 'hidden'}`\n\n\tconst optionClassName = `${cssNamespace}__option`\n\n\tconst hintClassName = `${cssNamespace}__hint`\n\tconst selectedOptionText = templateInputValue(options?.[selected])\n\tconst optionBeginsWithQuery = selectedOptionText &&\n\t\tselectedOptionText.toLowerCase().indexOf(query.toLowerCase()) === 0\n\tconst hintValue = (optionBeginsWithQuery && autoselectRend)\n\t\t? query + selectedOptionText.substr(query?.length)\n\t\t: ''\n\n\tconst assistiveHintID = id + '__assistiveHint'\n\tconst ariaDescribedProp = (ariaHint) ? {\n\t\t'aria-describedby': assistiveHintID\n\t} : null\n\n\tlet dropdownArrow\n\n\t// we only need a dropdown arrow if showAllValues is set to a truthy value\n\tif (showAllValues || alwaysDisplayArrow) {\n\t\tdropdownArrow = dropdownArrowFactory({ className: dropdownArrowClassName })\n\n\t\t// if the factory returns a string we'll render this as HTML (usage w/o (P)React)\n\t\tif (typeof dropdownArrow === 'string') {\n\t\t\tdropdownArrow = <div className={`${cssNamespace}__dropdown-arrow-down-wrapper`} dangerouslySetInnerHTML={{ __html: dropdownArrow }} />\n\t\t}\n\t}\n\n\n\treturn (\n\t\t<div className={wrapperClassName} onKeyDown={handleKeyDown} style={style}>\n\t\t\t<Status\n\t\t\t\tid={id}\n\t\t\t\tlength={options?.length}\n\t\t\t\tqueryLength={query?.length}\n\t\t\t\tminQueryLength={minLength}\n\t\t\t\tselectedOption={templateInputValue(options?.[selected])}\n\t\t\t\tselectedOptionIndex={selected}\n\t\t\t\tvalidChoiceMade={validChoiceMade}\n\t\t\t\tisInFocus={isFocus !== null}\n\t\t\t\ttQueryTooShort={tStatusQueryTooShort}\n\t\t\t\ttNoResults={tStatusNoResults}\n\t\t\t\ttSelectedOption={tStatusSelectedOption}\n\t\t\t\ttResults={tStatusResults}\n\t\t\t/>\n\n\t\t\t{hintValue && (\n\t\t\t\t<span><input className={hintClassName} readonly tabIndex='-1' value={hintValue} /></span>\n\t\t\t)}\n\n\t\t\t<input\n\t\t\t\taria-expanded={isMenuOpen ? 'true' : 'false'}\n\t\t\t\t{\n\t\t\t\t...(optionFocused) ? {\n\t\t\t\t\t\t'aria-activedescendant': `${id}__option--${isFocus}`\n\t\t\t\t\t} : null\n\t\t\t\t}\n\t\t\t\taria-owns={`${id}__listbox`}\n\t\t\t\taria-autocomplete={(hasAutoselect()) ? 'both' : 'list'}\n\t\t\t\taria-labelledby={ariaLabelledBy}\n\t\t\t\t{...ariaDescribedProp}\n\t\t\t\tautoComplete='off'\n\t\t\t\tclassName={`${inputClassName}${inputModifierFocused}${inputModifierType}`}\n\t\t\t\tid={id}\n\t\t\t\tonClick={handleInputClick}\n\t\t\t\tonBlur={handleInputBlur}\n\t\t\t\tonChange={handleInputChange}\n\t\t\t\tonFocus={handleInputFocus}\n\t\t\t\tname={name}\n\t\t\t\tplaceholder={placeholder}\n\t\t\t\tref={(inputElement) => { elementReferences[-1] = inputElement; }}\n\t\t\t\ttype='text'\n\t\t\t\trole='combobox'\n\t\t\t\trequired={required}\n\t\t\t\tvalue={query}\n\t\t\t/>\n\t\t\t{dropdownArrow}\n\t\t\t<ul\n\t\t\t\tclassName={`${menuClassName} ${menuModifierDisplayMenu} ${menuModifierVisibility}`}\n\t\t\t\tonMouseLeave={(event) => handleListMouseLeave(event)}\n\t\t\t\tid={`${id}__listbox`}\n\t\t\t\trole='listbox'\n\t\t\t>\n\t\t\t\t{options?.map((option, index) => {\n\t\t\t\t\tconst showFocused = isFocus === -1 ? selected === index : isFocus === index\n\t\t\t\t\tconst optionModifierFocused = showFocused && isHover === null ? ` ${optionClassName}--focused` : ''\n\t\t\t\t\tconst optionModifierOdd = (index % 2) ? ` ${optionClassName}--odd` : ''\n\t\t\t\t\tconst iosPosinsetHtml = (isIOSDevice())\n\t\t\t\t\t\t? `<span id=${id}__option-suffix--${index} style=\"border:0;clip:rect(0 0 0 0);height:1px;` +\n\t\t\t\t\t\t'marginBottom:-1px;marginRight:-1px;overflow:hidden;padding:0;position:absolute;' +\n\t\t\t\t\t\t'whiteSpace:nowrap;width:1px\">' + ` ${index + 1} of ${options?.length}</span>`\n\t\t\t\t\t\t: ''\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\taria-selected={isFocus === index ? 'true' : 'false'}\n\t\t\t\t\t\t\tclassName={`${optionClassName}${optionModifierFocused}${optionModifierOdd}`}\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: templateSuggestion(option) + iosPosinsetHtml }}\n\t\t\t\t\t\t\tid={`${id}__option--${index}`}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\tonBlur={(event) => handleOptionBlur(event, index)}\n\t\t\t\t\t\t\tonClick={(event) => handleOptionClick(event, index)}\n\t\t\t\t\t\t\tonMouseDown={handleOptionMouseDown}\n\t\t\t\t\t\t\tonMouseEnter={() => handleOptionMouseEnter(index)}\n\t\t\t\t\t\t\tref={(optionEl) => { elementReferences[index] = optionEl; }}\n\t\t\t\t\t\t\trole='option'\n\t\t\t\t\t\t\ttabIndex='-1'\n\t\t\t\t\t\t\taria-posinset={index + 1}\n\t\t\t\t\t\t\taria-setsize={options.length}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t\t{showNoOptionsFoundRender && (\n\t\t\t\t\t<li className={`${optionClassName} ${optionClassName}--no-results`}>{tNoResults()}</li>\n\t\t\t\t)}\n\t\t\t</ul>\n\n\t\t\t<span id={assistiveHintID} style={{ display: 'none' }}>{tAssistiveHint()}</span>\n\n\t\t</div>\n\t)\n}\n/**\n * ExampleComponent is an example component.\n * It takes a property, `label`, and\n * displays it.\n * It renders an input with the property `value`\n * which is editable by the user.\n */\nexport default AutoComplete;\n\nAutoComplete.enhanceSelectElement = (configurationOptions) => {\n\tif (!configurationOptions.selectElement) { throw new Error('selectElement is not defined') }\n\n\t// Set defaults.\n\tif (!configurationOptions.source) {\n\t\tconst availableOptions = [].filter.call(configurationOptions.selectElement.options, option => (option.value || configurationOptions.preserveNullOptions))\n\t\tconfigurationOptions.source = availableOptions.map(option => option.textContent || option.innerText)\n\t}\n\tconfigurationOptions.onConfirm = configurationOptions.onConfirm || (query => {\n\t\tconst requestedOption = [].filter.call(configurationOptions.selectElement.options, option => (option.textContent || option.innerText) === query)[0]\n\t\tif (requestedOption) { requestedOption.selected = true }\n\t\t// trigger change event on original select element\n\t\tconst event = new Event('change', { bubbles: true, cancelable: false})\n\t\tconfigurationOptions.selectElement.dispatchEvent(event)\n\t})\n\n\tif (configurationOptions.selectElement.value || configurationOptions.value === undefined) {\n\t\tconst option = configurationOptions.selectElement.options[configurationOptions.selectElement.options.selectedIndex]\n\t\tconfigurationOptions.value = option.textContent || option.innerText\n\t}\n\n\tif (configurationOptions.name === undefined) { configurationOptions.name = '' }\n\tif (configurationOptions.id === undefined) {\n\t\tif (configurationOptions.selectElement.id === undefined) {\n\t\t\tconfigurationOptions.id = ''\n\t\t} else {\n\t\t\tconfigurationOptions.id = configurationOptions.selectElement.id\n\t\t}\n\t}\n\tif (configurationOptions.autoselect === undefined) { configurationOptions.autoselect = true }\n\n\tconst element = document.createElement('div')\n\n\tconfigurationOptions.selectElement.parentNode.insertBefore(element, configurationOptions.selectElement)\n\n\t// eslint-disable-next-line new-cap\n\trender(AutoComplete({\n\t\t...configurationOptions,\n\t}), element)\n\n\tconfigurationOptions.selectElement.style.display = 'none'\n\tconfigurationOptions.selectElement.id = configurationOptions.selectElement.id + '-select'\n}\n\nAutoComplete.defaultProps = defaultProps;\nAutoComplete.propTypes = propTypes;"],"sourceRoot":""}